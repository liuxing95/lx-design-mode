# 建造者模式

## 概念

建造者模式（Builder Pattern）又称为 生成器模式 分布构建一个复杂对象 并允许按步骤构造。  

同样的构建过程可以采用不同的标示 将一个复杂对象的构建层与其表示层分离  


在工厂模式中，创建的结果都是一个完整的个体，我们对创建的过程并不关心，只需了解创建的结果。而在建造者模式中，我们关心的是对象的创建过程，因此我们通常将创建的复杂对象的模块化，使得被创建的对象的每一个子模块都可以得到高质量的复用，当然在灵活的 JavaScript 中我们可以有更灵活的实现。

## 你曾见过的建造者模式

假定我们需要建造一个车，车这个产品是由多个部件组成，车身、引擎、轮胎。汽车制造厂一般不会自己完成每个部件的制造，而是把部件的制造交给对应的汽车零部件制造商，自己只进行装配，最后生产出整车。整车的每个部件都是一个相对独立的个体，都具有自己的生产过程，多个部件经过一系列的组装共同组成了一个完整的车。

## 实例代码实现
我们可以用 JavaScript 来将上面的装配汽车的例子实现一下

代码 `builder.ts` 代码

作为灵活的 JavaScript，我们还可以使用链模式来完成部件的装配

## 建造者模式的通用实现
1.  Director： 指挥者 调用构造者的部件具体实现进行部件装配
2.  Builder： 构造者  含有不同部件的生产方式给指挥者调用，是部件真正的生产者，但没有部件的装配流程
3.  Product： 产品 要返回给访问者的复杂对象  



## 优缺点

建造者模式的优点：
1.  使用建造者模式可以使产品的构建流程和产品的表现分离， 也就是将产品的创建算法和产品的实现隔离 访问者不必知道产品部件的细节
2.  扩展方便 如果希望生产一个装配顺序或方式不同的新产品，那么直接新建一个指挥者即可，不用修改既有代码，符合开闭原则；
3.  更好的复用性，建造者模式将产品的创建算法和产品组成的实现分离，所以`产品创建的算法可以复用`，产品部件的`实现逻辑也可以复用`，带来很大的灵活性；


建造者模式的缺点：
1. 建造者模式一般适用于产品之间组成部件类似的情况，如果产品之间差异性很大、复用性不高，那么不要使用建造者模式；
2. 实例的创建增加了许多额外的结构，无疑增加了许多复杂度，如果对象粒度不大，那么我们最好直接创建对象；




## 其他相关模式

### 建造者模式与工厂模式

建造者模式和工厂模式最终都是创建一个完整的产品，但是在建造者模式中我们更关心对象创建的过程，将创建对象的方法模块化，从而更好地复用这些模块。
当然建造者模式与工厂模式也是可以组合使用的，比如建造者中一般会提供不同的部件实现，那么这里就可以使用工厂模式来提供具体的部件对象，再通过指挥者来进行装配。

